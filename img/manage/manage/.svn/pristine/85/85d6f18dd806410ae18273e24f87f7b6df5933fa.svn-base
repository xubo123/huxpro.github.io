<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hxy.core.channel.dao.NewsChannelMapper">

	<select id="selectNewsTagList" parameterType="map"
		resultType="com.hxy.core.channel.entity.NewsTag">
		select t.*,d.departmentName from news_tag t
		left join department d on
		t.department_id = d.department_id
		<where>
			<if test="tagName!=null and tagName!=''">
				tagName like concat('%',#{tagName},'%')
			</if>
		</where>
	</select>

	<select id="countNewsTag" parameterType="map" resultType="long">
		select count(tagId) from news_tag
		<where>
			<if test="tagName!=null and tagName!=''">
				tagName like concat('%',#{tagName},'%')
			</if>
		</where>
	</select>

	<select id="selectById2" parameterType="long"
		resultType="com.hxy.core.channel.entity.NewsTag">
		select t.*,d.departmentName from news_tag t
		left join
		department d on t.department_id = d.department_id
		where
		tagId=#{channelId}
	</select>
	<select id="selectTagbytagId" parameterType="long" resultType="String">
		select tag from news_tag where tagId = #{tagId}
	</select>

	<update id="update" parameterType="com.hxy.core.channel.entity.NewsTag">
		update news_tag set
		tagName=#{tagName},tagIcon=#{tagIcon},tagRemark=#{tagRemark}
		where
		tagId=#{tagId}
	</update>


	<select id="selectAll2" resultType="com.hxy.core.channel.entity.NewsTag">
		select t.* from news_tag t
		left outer join department d on
		t.department_id = d.department_id
		<if test="deptList!=null and deptList!=''">
			where d.department_id in
			<foreach collection="deptList" open="(" separator="or" close=")"
				item="dept">
				#{dept.department_id}
			</foreach>
		</if>
		order by d.type
	</select>

	<insert id="saveTag" parameterType="com.hxy.core.channel.entity.NewsTag">
		insert into
		news_tag(tagName,tagIcon,tagRemark,department_id,tag)
		values(#{tagName},#{tagIcon},#{tagRemark},#{department_id},#{tag})
	</insert>

	<delete id="delete" parameterType="list">
		delete from news_tag where tagId in
		<foreach collection="list" item="ids" open="(" separator=","
			close=")">
			#{ids}
		</foreach>
	</delete>

</mapper>